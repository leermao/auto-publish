type: function
parameters:
  - id: 18oOEYlrV5GQm45QbLIC7
    key: title
  - id: uJ6DFISjgU55s1QxOulGs
    key: content
  - id: jsXYB5VhsuuSDzOBiqSQ3
    key: image
prompts:
  NTdJigtLCBziAsS48vBTh:
    index: 0
    data:
      type: message
      data:
        id: NTdJigtLCBziAsS48vBTh
        role: user
        content: "{{ question }}"
outputVariables: []
id: 20240806105242-f8mkug
createdAt: 2024-08-06T02:52:42.615Z
updatedAt: 2024-08-06T02:52:42.615Z
createdBy: z2qaBKnrTUAobCcqGMbqAMFW5WHpYzL3Kub2D
updatedBy: z2qaBKnrTUAobCcqGMbqAMFW5WHpYzL3Kub2D
name: 上传 Blog
code: |
  
  const response = await call({
    name: 'did-comments',
    path: '/api/call/blog/publish',
    method: 'POST',
    data: { 
      title: title, 
      content:content, 
      publishTime: new Date(), 
      boardId:'blog-default',
      locale: 'en',
      cover: image
    },
    headers: context.getUserHeader()
  });


  const labels = [];
  if(labels.length) {
    await call({
      name: 'did-comments',
      path: `/api/blogs/call/${response.data?.id}/settings`,
      method: 'PUT',
      data: { labels: labels, author: context.user.did },
      headers: context.getUserHeader()
    });
  }

  // 发布tag
  const id: string = response.data?.id;
  const slug: string = response.data?.slug;

  return {
    id,
    slug
  }
